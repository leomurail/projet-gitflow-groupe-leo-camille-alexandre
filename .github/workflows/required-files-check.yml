name: 🔍 Check required files

on:
  pull_request:
  push:
    branches: [main, develop]

jobs:
  check-required-files:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Verify presence of essential files
        shell: bash
        run: |
          echo "🔎 Vérification des fichiers essentiels..."
          missing=0

          for f in README.md CHANGELOG.md LICENSE CONTRIBUTING.md; do
            if [[ ! -f "$f" ]]; then
              echo "::error file=$f,line=1,col=1::❌ Le fichier requis '$f' est manquant à la racine du dépôt."
              missing=1
            else
              echo "✅ $f présent"
            fi
          done

          if [[ $missing -eq 1 ]]; then
            echo "::error::🚫 Vérification échouée — un ou plusieurs fichiers obligatoires sont absents."
            exit 1
          else
            echo "🎉 Tous les fichiers requis sont présents."
          fi
